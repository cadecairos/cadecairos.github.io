<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>OSD700 1.0 Release post</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/highlighter/prettify.css?v=3a098a1af2" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css?v=3a098a1af2" />

    <script type='text/javascript' src="/assets/js/jquery-3.1.1.min.js?v=3a098a1af2"></script>
    <link rel="canonical" href="https://chrisdecairos.ca/osd700-1-0-release-post/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="Chris DeCairos">
    <meta property="og:type" content="article">
    <meta property="og:title" content="OSD700 1.0 Release post">
    <meta property="og:description" content="Relevant bugs: Bug 726904 [https://bugzilla.mozilla.org/show_bug.cgi?id&#x3D;726904], 
Bug 517363 [https://bugzilla.mozilla.org/show_bug.cgi?id&#x3D;517363]

This, the last post I&#x27;ll be making for my OSD700 class is going to discuss the
work I&#x27;ve been doing on the above mentioned bugs.

I&#x27;ve">
    <meta property="og:url" content="https://chrisdecairos.ca/osd700-1-0-release-post/">
    <meta property="article:published_time" content="2012-04-19T18:49:55.000Z">
    <meta property="article:modified_time" content="2018-08-22T02:24:40.000Z">
    <meta property="article:tag" content="Firefox">
    <meta property="article:tag" content="media">
    <meta property="article:tag" content="Mozilla">
    <meta property="article:tag" content="open-source">
    <meta property="article:tag" content="Seneca">
    <meta property="article:tag" content="video">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="OSD700 1.0 Release post">
    <meta name="twitter:description" content="Relevant bugs: Bug 726904 [https://bugzilla.mozilla.org/show_bug.cgi?id&#x3D;726904], 
Bug 517363 [https://bugzilla.mozilla.org/show_bug.cgi?id&#x3D;517363]

This, the last post I&#x27;ll be making for my OSD700 class is going to discuss the
work I&#x27;ve been doing on the above mentioned bugs.

I&#x27;ve">
    <meta name="twitter:url" content="https://chrisdecairos.ca/osd700-1-0-release-post/">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Chris DeCairos">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Firefox, media, Mozilla, open-source, Seneca, video">
    <meta name="twitter:site" content="@ChrisDeCairos">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Chris DeCairos",
        "url": "https://chrisdecairos.ca/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://chrisdecairos.ca/content/images/2020/12/profile--Small-.jpg"
        }
    },
    "author": {
        "@type": "Person",
        "name": "Chris DeCairos",
        "image": {
            "@type": "ImageObject",
            "url": "//www.gravatar.com/avatar/5410ec660422c8ea12d4a28ef794a23a?s=250&d=mm&r=x",
            "width": 250,
            "height": 250
        },
        "url": "https://chrisdecairos.ca/author/chris/",
        "sameAs": []
    },
    "headline": "OSD700 1.0 Release post",
    "url": "https://chrisdecairos.ca/osd700-1-0-release-post/",
    "datePublished": "2012-04-19T18:49:55.000Z",
    "dateModified": "2018-08-22T02:24:40.000Z",
    "keywords": "Firefox, media, Mozilla, open-source, Seneca, video",
    "description": "Relevant bugs: Bug 726904 [https://bugzilla.mozilla.org/show_bug.cgi?id&#x3D;726904], \nBug 517363 [https://bugzilla.mozilla.org/show_bug.cgi?id&#x3D;517363]\n\nThis, the last post I&#x27;ll be making for my OSD700 class is going to discuss the\nwork I&#x27;ve been doing on the above mentioned bugs.\n\nI&#x27;ve been working on these two for a while, and as of today I&#x27;m very, very close\nto getting them land. 726904 is R+ and is waiting on 517363 ( more on that later\n)\n\nI&#x27;ve written several times about 726904\n[https://bugzilla",
    "mainEntityOfPage": "https://chrisdecairos.ca/osd700-1-0-release-post/"
}
    </script>

    <meta name="generator" content="Ghost 5.62">
    <link rel="alternate" type="application/rss+xml" title="Chris DeCairos" href="https://chrisdecairos.ca/rss/">
    
    <script defer src="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/sodo-search.min.js" data-key="6155d3cf5dbae2dc7c7242039b" data-styles="https://cdn.jsdelivr.net/ghost/sodo-search@~1.1/umd/main.css" data-sodo-search="https://chrisdecairos.ca/" crossorigin="anonymous"></script>
    
    <link href="https://chrisdecairos.ca/webmentions/receive/" rel="webmention">
    <script defer src="/public/cards.min.js?v=3a098a1af2"></script><style>:root {--ghost-accent-color: #15171A;}</style>
    <link rel="stylesheet" type="text/css" href="/public/cards.min.css?v=3a098a1af2">
</head>
<body class="post-template tag-firefox tag-media tag-mozilla tag-open-source tag-seneca tag-video">

    

<main class="content" role="main">

    <article class="post tag-firefox tag-media tag-mozilla tag-open-source tag-seneca tag-video no-image">

        <header class="post-header">
            <a id="blog-logo" href="https://chrisdecairos.ca">
                    <img src="https://chrisdecairos.ca/content/images/2020/12/profile--Small-.jpg" alt="Blog Logo" />
            </a>
        </header>


        <span class="post-meta"><time datetime="2012-04-19">19 Apr 2012</time> on <a href="/tag/firefox/">Firefox</a> | <a href="/tag/media/">media</a> | <a href="/tag/mozilla/">Mozilla</a> | <a href="/tag/open-source/">open-source</a> | <a href="/tag/seneca/">Seneca</a> | <a href="/tag/video/">video</a></span>

        <h1 class="post-title">OSD700 1.0 Release post</h1>

        <section class="post-content">
            <!--kg-card-begin: markdown--><p>Relevant bugs: <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=726904&ref=chrisdecairos.ca">Bug 726904</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=517363&ref=chrisdecairos.ca">Bug 517363</a></p>
<p>This, the last post I'll be making for my OSD700 class is going to discuss the work I've been doing on the above mentioned bugs.</p>
<p>I've been working on these two for a while, and as of today I'm very, very close to getting them land. 726904 is R+ and is waiting on 517363 ( more on that later )</p>
<p>I've written several times about <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=726904&ref=chrisdecairos.ca">726904</a> ( <a href="https://chrisdecairos.ca/buggin-out.html">here</a>, <a href="https://chrisdecairos.ca/osd700-release-post-0-7.html">here</a>, <a href="https://chrisdecairos.ca/osd700-release-0-9.html">here</a> ) but I will summarize it for you once more. It's titled &quot;nsVideoFrame::GetVideoIntrinsicSize setting wrong size&quot; and I filed it in mid February while working on <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=517363&ref=chrisdecairos.ca">517363</a>. I noticed that the initial size of a video element wasn't behaving how I expected it to if there were no explicit sizes defined for it ( Either through height/width attributes or CSS ). I <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=517363&ref=chrisdecairos.ca#c13">mentioned this is 517363</a> and Robert O'Callahan pointed me to the specification, and upon investigating, I found that Firefox was setting the video size incorrectly.</p>
<p>I've iterated on this bug so many times I've lost count ( I lied, I have all 14 versions of my patch ). Fixing up the GetVideoIntrinsicSize method as probably only 15% of the work I did. The rest was all put into updating the reftests that my patch broke. I'd say the most challenging part of updating the reftests was to make sure that they were still testing what they set out to. As a bit of extra work, I also modified a getVideoSize method to work better for our purposes in this bug.</p>
<p>Now that 726904 is ready, I've focused my efforts back on 517363, and I'm making great progress. This bug wanted to add poster frame scaling to the video element. In Firefox 11, the stable version as of the writing of this post, when you add a poster frame to a video, Firefox will stretch/shrink it with no regard for it's intrinsic ratio, making it fit in the video frame. With this fix in place, the poster image will always have it's aspect ratio preserved if it needs to be resized.</p>
<p>This patch has been a fun one to produce, because I had to learn how to scale the image properly, and efficiently. Taking from areas in the same file that scale the video frames, I was able to construct a process for the poster frame that would do exactly what we needed.  There were several issues I had to deal with, such as centring the image, and making sure I took into account borders.  I now have a (hopefully) <a href="https://bugzilla.mozilla.org/attachment.cgi?id=616766&action=diff&ref=chrisdecairos.ca">solid patch</a> that works, and I based it off of <a href="https://bugzilla.mozilla.org/attachment.cgi?id=616450&action=diff&ref=chrisdecairos.ca">my patch for 726904</a>. About 45 minutes prior to writing this I pushed both patches together to try ( <a href="https://tbpl.mozilla.org/?tree=Try&rev=2fde97b75aa7&ref=chrisdecairos.ca">https://tbpl.mozilla.org/?tree=Try&amp;rev=2fde97b75aa7</a> (This link will expire)) so we're going to know soon whether these patches bring Firefox's Video element up to par with the spec.</p>
<p>These two patches may not have landed, but they will be landing very, very soon. When they do land, I'll be proud to know that My hard work brought Firefox Video up to standard when determining it's Intrinsic size, and that I enhanced poster frame behaviour for all Firefox users worldwide. I'm looking forward to taking on another challenge sometime soon!</p>
<!--kg-card-end: markdown-->
        </section>

        <footer class="post-footer">

                <section class="author">
                    <h4>Chris DeCairos</h4>
                    <p></p>
                </section>

            <section class="share">
                <h4>Share this</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=OSD700 1.0 Release post&url=https://chrisdecairos.ca/osd700-1-0-release-post/">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://chrisdecairos.ca/osd700-1-0-release-post/">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://chrisdecairos.ca/osd700-1-0-release-post/">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


    </article>

</main>


    <footer class="site-footer">
        <a class="subscribe icon-feed" href="https://chrisdecairos.ca/rss/"><span class="tooltip">Subscribe!</span></a>
        <div class="inner">
             <section class="copyright">All content copyright <a href="/">Chris DeCairos</a> &copy; 2024 &bull; All rights reserved.</section>
        </div>
    </footer>

    

    <script type='text/javascript' src="/assets/highlighter/prettify.js?v=3a098a1af2"></script>
    <script type='text/javascript' src="/assets/js/shell.js?v=3a098a1af2"></script>
</body>
</html>
